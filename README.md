# 银行卡管理系统 v2.0

## 项目简介

银行卡管理系统是一个基于Python开发的银行卡管理应用程序，采用MVC（Model-View-Controller）架构设计，运用面向对象编程思想，为储户提供便捷的银行卡管理服务。

**v2.0 新特性：**
- ✨ 全新的PyQt5图形化界面，操作更直观
- 🎨 现代化的UI设计，美观易用
- 🚀 更好的用户体验
- 💼 保留命令行版本，支持双模式运行

## 功能特性

### 1. 用户管理子系统
- **用户注册**：支持新用户注册，包含用户名、密码、真实姓名、身份证号、手机号、邮箱等信息
- **用户登录**：安全的用户认证机制，密码采用SHA256加密
- **用户信息管理**：查看和修改个人信息、修改密码

### 2. 存取款管理子系统
- **开户**：为已注册用户创建银行账户，自动生成16位卡号
- **存款**：向指定账户存入资金
- **取款**：从指定账户取出资金（需验证余额）
- **查询余额**：实时查看账户余额
- **交易记录**：查看账户的所有交易历史

### 3. 账户管理子系统
- **挂失**：对遗失的银行卡进行挂失操作
- **解除挂失**：解除账户挂失状态
- **账户冻结**：冻结异常账户
- **账户解冻**：解除账户冻结
- **销户**：关闭不再使用的账户（需清空余额）

## 技术架构

### MVC架构设计

```
bank_system/
├── models/              # 模型层 - 数据模型定义
│   ├── user.py         # 用户模型
│   ├── account.py      # 账户模型
│   └── __init__.py
├── views/              # 视图层 - 用户界面
│   ├── main_view.py    # 主视图
│   └── __init__.py
├── controllers/        # 控制器层 - 业务逻辑
│   ├── user_controller.py      # 用户控制器
│   ├── account_controller.py   # 账户控制器
│   └── __init__.py
├── utils/              # 工具类
│   ├── data_manager.py # 数据管理器
│   └── __init__.py
├── data/               # 数据存储目录（自动生成）
│   ├── users.json      # 用户数据
│   └── accounts.json   # 账户数据
├── main.py             # 主程序入口
├── README.md           # 项目说明文档
└── requirements.txt    # 项目依赖
```

### 面向对象设计

#### 核心类设计

**User 类（用户）**
- 属性：用户名、密码（加密）、真实姓名、身份证、手机号、邮箱、注册时间、账户状态
- 方法：密码验证、对象序列化/反序列化

**Account 类（银行账户）**
- 属性：卡号、关联用户、余额、账户状态、交易历史
- 方法：存款、取款、查询余额、冻结、解冻、挂失、销户
- 状态：正常、冻结、挂失、销户

**UserController 类（用户控制器）**
- 负责用户注册、登录、登出、信息管理等业务逻辑

**AccountController 类（账户控制器）**
- 负责账户开户、存取款、账户管理等业务逻辑

**DataManager 类（数据管理器）**
- 负责数据的持久化存储（JSON文件）

**MainView 类（主视图）**
- 负责所有用户交互界面的展示

## 安装与运行

### 环境要求
- Python 3.6 或更高版本
- PyQt5 5.15.0 或更高版本（GUI版本需要）

### 安装步骤

1. 确保已安装Python 3.6+
```bash
python --version
```

2. 进入项目目录
```bash
cd F:\bank_system
```

3. 安装依赖（GUI版本）
```bash
pip install -r requirements.txt
```

4. 运行程序

**方式一：运行GUI图形界面版本（推荐）**
```bash
python main_gui.py
```

**方式二：运行命令行版本**
```bash
python main.py
```

## 使用说明

### GUI版本使用指南（推荐）

#### 首次使用

1. **注册账号**
   - 运行 `python main_gui.py` 启动程序
   - 在登录窗口点击"立即注册"按钮
   - 填写注册表单：
     - 用户名（至少3个字符）
     - 密码（至少6个字符）并确认
     - 真实姓名
     - 身份证号（18位）
     - 手机号（11位）
     - 邮箱（可选）
   - 点击"注册"按钮完成注册

2. **登录系统**
   - 在登录窗口输入用户名和密码
   - 点击"登录"按钮或按回车键登录

3. **主界面功能**
   登录成功后进入主界面，可以使用以下功能：
   
   - **👤 用户管理**：查看和修改个人信息、修改密码
   - **➕ 开户**：创建新的银行账户
   - **💰 存款**：向账户存入资金
   - **💸 取款**：从账户取出资金
   - **⚙️ 账户管理**：挂失、解挂、冻结、解冻、销户等操作
   - **🔄 刷新**：刷新账户列表
   
   在账户列表中可以：
   - 查看所有账户的卡号、余额、状态和开户时间
   - 点击"交易记录"按钮查看详细交易历史

#### 日常操作

- **开户**：点击"开户"按钮，输入初始存款金额（默认0元），系统自动生成16位卡号
- **存款**：点击"存款"按钮，选择账户，输入存款金额
- **取款**：点击"取款"按钮，选择账户，输入取款金额
- **查看交易记录**：在账户列表中点击对应账户的"交易记录"按钮
- **账户管理**：点击"账户管理"按钮，选择账户后进行挂失、冻结等操作
- **退出登录**：点击右上角"退出登录"按钮

### 命令行版本使用指南

- **存款/取款**：在"存取款管理"菜单中选择相应功能
- **查询余额**：可查看任意账户的当前余额
- **查看交易记录**：查看账户的所有交易历史
- **账户管理**：可对账户进行挂失、冻结、销户等操作

## 数据存储

系统使用JSON文件存储数据，位于`data/`目录下：
- `users.json`：存储所有用户信息
- `accounts.json`：存储所有账户信息

数据采用UTF-8编码，格式化存储，便于阅读和调试。

## 安全特性

1. **密码加密**：使用SHA256算法对密码进行加密存储
2. **输入验证**：对所有用户输入进行格式和合法性验证
3. **权限控制**：用户只能操作自己的账户
4. **状态管理**：账户状态控制（正常、冻结、挂失、销户）

## 版本信息

- **当前版本**：v2.0
- **更新日期**：2025年10月
- **架构模式**：MVC
- **编程语言**：Python 3
- **GUI框架**：PyQt5

### 版本历史

**v2.0 (2025-10)**
- ✅ 开发图形界面（PyQt5 GUI）
- ✅ 现代化UI设计
- ✅ 优化用户体验
- ✅ 保留命令行版本

**v1.0 (2025-10)**
- ✅ 基础功能实现
- ✅ MVC架构设计
- ✅ 命令行界面

### 后续升级计划

- [ ] 集成数据库（MySQL/SQLite）
- [ ] 添加账户间转账功能
- [ ] 实现定期存款和利息计算
- [ ] 支持多币种
- [ ] 增加操作日志记录
- [ ] 添加数据导出和备份功能
- [ ] 添加数据可视化（图表统计）

## 开发者说明

本项目完全基于面向对象思想开发：
- 清晰的MVC分层架构
- 良好的代码封装和复用
- 符合单一职责原则
- 易于维护和扩展

### 项目结构

```
bank_system/
├── controllers/              # 控制器层
│   ├── user_controller.py   # 用户控制器
│   └── account_controller.py # 账户控制器
├── models/                   # 模型层
│   ├── user.py              # 用户模型
│   └── account.py           # 账户模型
├── views/                    # 视图层
│   ├── main_view.py         # 命令行视图
│   ├── login_window.py      # 登录窗口（GUI）
│   ├── register_window.py   # 注册窗口（GUI）
│   ├── main_window.py       # 主窗口（GUI）
│   └── dialogs.py           # 各种对话框（GUI）
├── utils/                    # 工具类
│   └── data_manager.py      # 数据管理器
├── data/                     # 数据存储
│   ├── users.json           # 用户数据
│   └── accounts.json        # 账户数据
├── main.py                   # 命令行版入口
├── main_gui.py              # GUI版入口
└── requirements.txt          # 项目依赖
```

### GUI界面特点

- 使用PyQt5框架开发
- 响应式布局设计
- 美观的现代化UI
- 直观的操作流程
- 完善的错误提示
- 支持键盘快捷操作

## 许可证

本项目仅用于学习和演示目的。

---

**注意**：本系统为演示项目，不建议用于生产环境。实际银行系统需要更严格的安全措施和完善的功能。

